language: node_js
node_js:
  - "0.12"

before_install:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"

before_script:
  - gem install sass
  - npm install -g bower grunt-cli
  - bower install
  - node_modules/.bin/webdriver-manager update
  - npm start > /dev/null &
  - sleep 1 # give server time to start

script:
  - node_modules/.bin/protractor test/e2e/protractor.conf.js --browsers=Firefox # e2e test
  - grunt test --verbose # unit test

git:
  depth: 10